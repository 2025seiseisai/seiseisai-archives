!function(r){function e(r){var e=n(r,"turnBoxType"),e=s(e),a=n(r,"turnBoxDirection"),a=s(a),t=r.children(".turnBoxFaceNum1").css("height"),i=r.children(".turnBoxFaceNum2").css("height"),o=r.children(".turnBoxFaceNum1").css("width"),u=r.children(".turnBoxFaceNum2").css("width");if(t==i&&o==u)var v=!0;else if(t!==i||o!==u)var v=!1;var f={face_pcs:r.children().length,current_num:parseInt(n(r,"turnBoxCurrentFace")),duration:1e3*parseFloat(r.css("transition-duration")),delay:1e3*parseFloat(r.css("transition-delay")),type:e,fixed:v,direction:a};return f}function a(r){var e=r,e=e.replace(/ \./g,"--"),e=e.replace(/ \#/g,"-_"),e=e.replace(/ /g,""),e=e.replace(/\./g,"-"),e=e.replace(/\#/g,"_");return e}function n(r,e){var a=r.attr("class"),n=e.length,t=a.indexOf(e),i=r.attr("class").slice(t+n),s=i.indexOf(" ");if(-1!==s)var o=i.slice(0,s);else var o=i;return o}function t(r){var e=r.slice(0,1).toUpperCase(),a=r.slice(1),r=e+a;return r}function s(r){var e=r.slice(0,1).toLowerCase(),a=r.slice(1),r=e+a;return r}function o(e,i,s,o,v,f,x,c,l){r.each(i,function(){var i=r(this),p=["click","mouseover","mouseup","mousedown","mousemove","mouseout","touchstart","touchmove","touchend"],d="";0==l?r(this).attr("class").indexOf("turnBoxButtonEvent")>-1?r.each(p,function(){var r=this;i.attr("class").indexOf("turnBoxButtonEvent"+t(r))>-1&&(d=d+" "+r)}):d+="click":d=l.events,i.on(d,function(){if(i.attr("class").indexOf("turnBoxButtonFor-")>-1)var t=new RegExp("(turnBoxButtonFor-)([^ ]*)","gi"),p=t.exec(i.attr("class"))[2];else var p=a(r(e).selector);if(0==l)var d=r(this).closest(".turnBoxContainer");else var d=e;var B=parseInt(n(d,"turnBoxCurrentFace"));if(0==l)if("skip"==v&&r(this).attr("class").indexOf("turnBoxButtonTo")>-1)var h=parseInt(n(r(this),"turnBoxButtonTo"));else if(1==r(this).hasClass("turnBoxButtonPrev"))var h=B-1;else var h=B+1;else if("skip"==v&&1==r.isNumeric(l.dist))var h=l.dist;else if("prev"==l.dist)var h=B-1;else var h=B+1;(a(r(e).selector)==p||l!==!1)&&u(d,B,h,s,o,v,f,x,c)})})}function u(r,e,a,n,t,i,s,o,u,v){if(e==a)return!1;var f=r.children().hasClass("turnBoxTransition"),s=r.children().length,x=n+t,c=20;return"real"!==i&&(5==a&&(a=1),4==s&&0==a&&(a=s)),4!==s&&a>s||4!==s&&1>a?!1:void((0==f||1==f&&void 0!==v)&&(0==o&&"real"==i&&("negative"==u?(0==e&&5==a||1==e&&2==a||2==e&&1==a||3==e&&4==a||4==e&&3==a||5==e&&0==a)&&r.addClass("turnBoxAdjust"):(0==e&&1==a||1==e&&0==a||2==e&&3==a||3==e&&2==a||4==e&&5==a||5==e&&4==a)&&r.addClass("turnBoxAdjust"),setTimeout(function(){r.removeClass("turnBoxAdjust")},x+c+20)),setTimeout(function(){var n="turnBoxCurrentFace"+e.toFixed(),t="turnBoxCurrentFace"+a.toFixed(),i="turnBoxFaceNum"+e.toFixed(),s="turnBoxFaceNum"+a.toFixed();if(0==a)var i="turnBoxFaceNum1",s="turnBoxFaceNum4";if(5==a)var i="turnBoxFaceNum4",s="turnBoxFaceNum1";(1==v||void 0==v)&&r.find(".turnBoxFace").addClass("turnBoxTransition"),r.children("."+s).addClass("turnBoxShow"),r.addClass(t).removeClass(n),setTimeout(function(){r.find(".turnBoxFace").removeClass("turnBoxTransition"),r.children("."+i).removeClass("turnBoxShow"),0==a&&r.addClass("turnBoxCurrentFace4").removeClass("turnBoxCurrentFace0"),5==a&&r.addClass("turnBoxCurrentFace1").removeClass("turnBoxCurrentFace5")},x)},c)))}r.fn.turnBox=function(e){function N(e,n){var t=a(e.selector),i="turnBoxStyle-"+t,s='<style id="%style_id%">\n%css_code%\n</style>',o=s.replace(/%style_id%/g,i);o=o.replace(/%css_code%/g,n),null!=document.getElementById(i)&&r("#"+i).remove(),r("head").append(o)}function _(){var r=["-webkit-","-moz-","-ms-","-o-",""];return r}function w(){var e=_(),a="";return r.each(e,function(){a=a+" "+this+"perspective: "+l+"px;\n"}),a}function k(e){var a=_(),n="";return r.each(a,function(){if("each_face"==e)var a=[this+"transform","z-index","background"];else if("background"==e)var a=["background"];else var a=["all"];var t="";r.each(a,function(r){var e=", ";if(this==a[0])var e="";t=t+e+this+" "+p+"ms "+d+" "+B+"ms"}),n=n+" "+this+"transition: "+t+";\n"}),n}function b(e){var a=_(),n="";return r.each(a,function(){n=n+" "+this+"transform-origin: "+e+";\n"}),n}function T(e,a,n){if(void 0!==n)var t=O(e,a);else if(0==y)var t=A(e,a);else var t=j(e);var i=_(),s="";return r.each(i,function(){s=s+" "+this+"transform: rotate"+m+"("+e+"deg) translate3d("+t+");\n"}),s}function j(r){var e=g;if(0>r&&(e=-g),0==r||360==r||-360==r)var a="0px, 0px, 0px";if("Y"==m){if(90==r||-90==r)var a=e/2+"px, 0px, "+g/2+"px";else if(180==r||-180==r)var a="0px, 0px, "+g+"px";else if(270==r||-270==r)var a=e/2+"px, 0px, "+g/2+"px"}else if(90==r||-90==r)var a="0px, "+-e/2+"px, "+g/2+"px";else if(180==r||-180==r)var a="0px, 0px, "+g+"px";else if(270==r||-270==r)var a="0px, "+e/2+"px, "+g/2+"px";return a}function A(r,e){var a=g;if(0>r&&(a=-1*g),0==r||360==r||-360==r)var n="0px, 0px, 0px";if("Y"==m){if(1==e||3==e||5==e)if(90==r||-270==r)var n=c+"px, 0px, 0px";else if(180==r||-180==r)var n=2*c-g+"px, 0px, "+c+"px";else if(270==r||-90==r)var n=c-g+"px, 0px, "+c+"px";if(0==e||2==e||4==e)if(90==r||-270==r)var n=c+"px, 0px, "+-(c-g)+"px";else if(180==r||-180==r)var n=c+"px, 0px, "+g+"px";else if(270==r||-90==r)var n="0px, 0px, "+c+"px"}else{if(1==e||3==e||5==e)if(90==r||-270==r)var n="0px, "+(c-g)+"px, "+c+"px";else if(180==r||-180==r)var n="0px, "+(2*c-g)+"px, "+c+"px";else if(270==r||-90==r)var n="0px, "+c+"px, 0px";if(0==e||2==e||4==e)if(90==r||-270==r)var n="0px, 0px, "+c+"px";else if(180==r||-180==r)var n="0px, "+c+"px, "+g+"px";else if(270==r||-90==r)var n="0px, "+c+"px, "+-(c-g)+"px"}return n}function O(r,e){var a=g;if(0>r&&(a=-1*g),0==r||360==r||-360==r)var n="0px, 0px, 0px";if("Y"==m){if(1==e||3==e||5==e)if(90==r||-270==r)var n="0px, 0px, "+c+"px";else if(180==r||-180==r)var n=-g+"px, 0px, "+c+"px";else if(270==r||-90==r)var n=-g+"px, 0px, 0px";if(0==e||2==e||4==e)if(90==r||-270==r)var n="0px, 0px, "+g+"px";else if(180==r||-180==r)var n=-c+"px, 0px, "+g+"px";else if(270==r||-90==r)var n=-c+"px, 0px, 0px"}else{if(1==e||3==e||5==e)if(90==r||-270==r)var n="0px, "+-g+"px, 0px";else if(180==r||-180==r)var n="0px, "+-g+"px, "+c+"px";else if(270==r||-90==r)var n="0px, 0px, "+c+"px";if(0==e||2==e||4==e)if(90==r||-270==r)var n="0px, "+-c+"px, 0px";else if(180==r||-180==r)var n="0px, "+-c+"px, "+g+"px";else if(270==r||-90==r)var n="0px, 0px, "+g+"px"}return n}function Y(){var e=a(v.selector);r.each(v,function(){var a=r(this),n=t(h),s=t(F);if(1==a.hasClass("turnBoxContainer"))return!1;for(a.children(":gt(3)").remove(),a.addClass("turnBoxContainer  turnBoxName-"+e+" turnBoxType"+n+" turnBoxDirection"+s+" turnBoxCurrentFace1"),i=0;i<C;i++){var o=i+1,u=r(a.children()[i]);u.addClass("turnBoxFace turnBoxFaceNum"+o),1==o&&u.addClass("turnBoxShow")}})}function E(){var e=r(v).find(".turnBoxButton"),t=a(r(v).selector),i="turnBoxButtonFor-"+t;return void 0!==e.attr("class")?(r.each(e,function(){var e=r(this);if(e.attr("class").indexOf("turnBoxButtonFor-")>-1){var a=new RegExp("(turnBoxButtonFor-)([^ ]*)","gi"),s=a.exec(e.attr("class")),o=n(e.closest(".turnBoxContainer"),"turnBoxName-");o==t&&(e.removeClass(s[0]),e.addClass(i))}else e.addClass(i)}),i):void 0}function M(){var e=v.selector,a=1;if(4==C){C=6;var a=0}else C+=1;if("Y"==m)var n="width",t=f;else var n="height",t=x;var s="";if(0==y){if("Y"==m)var o=c+"px 50%",u=" left: "+-(c-t)/2+"px;\n",s="\n"+e+".turnBoxAdjust > .turnBoxFace {\n"+b("0px 50%")+"}\n";else var o="50% "+c+"px",u=" height: "+c+"px;\n",s="\n"+e+".turnBoxAdjust > .turnBoxFace {\n"+b("50% 0px")+"}\n";var l=e+".turnBoxCurrentFace0, "+e+".turnBoxCurrentFace2, "+e+".turnBoxCurrentFace4 {\n"+u+"}\n\n"+e+" > .turnBoxFaceNum1, "+e+" > .turnBoxFaceNum3, "+e+" > .turnBoxFaceNum5 {\n "+n+": "+t+"px;\n}\n\n"+e+" > .turnBoxFaceNum0, "+e+" > .turnBoxFaceNum2, "+e+" > .turnBoxFaceNum4 {\n "+n+": "+c+"px;\n}\n"}else var l="",o="50% 50%";var p=e+" {\n"+k("box")+w()+" display: block;\n position: relative;\n width: "+f+"px;\n height: "+x+"px;\n left: 0;\n}\n"+s,d=e+" > .turnBoxFace {\n"+b(o)+" position: absolute;\n width: 100%;\n height: 100%;\n top: 0;\n left: 0;\n opacity: 0;\n}\n\n"+e+" > .turnBoxShow {\n opacity: 1;\n}\n\n"+e+" > .turnBoxTransition {\n"+k("each_face")+"}\n",B="",g="";for(i=a;i<C;i++){var _=i,j=e+".turnBoxCurrentFace"+_;r.each(v,function(){face_arry=r(this).children(".turnBoxFace")}),r.each(face_arry,function(r){var e=r+1,a=-90*(_-e);if("skip"==h){if(0==a)var a=0;else if(0>a)var a=-90;else if(a>0)var a=90;if(4==_&&1==e||1==_&&4==e)var a=-1*a}if("repeat"==h){if(!(1!=_&&3!=_&&5!=_||0!=e&&2!=e&&4!=e))var a=90;if(!(0!=_&&2!=_&&4!=_||1!=e&&3!=e&&5!=e))var a=-90}if("negative"==F){var a=-1*a;if(a==-0)var a=0}if(0==a||360==Math.abs(a))var n=20;else if(90==Math.abs(a)||270==Math.abs(a))var n=10;else if(180==Math.abs(a))var n=0;B=B+"\n"+j+" > .turnBoxFaceNum"+e+" {\n"+T(a,e)+" z-index: "+n+";\n}\n",0==y&&"real"==h&&(g=g+"\n"+j+".turnBoxAdjust > .turnBoxFaceNum"+e+" {\n"+T(a,e,!0)+"}\n")})}var A=p+"\n"+d+"\n"+l+"\n"+B+"\n"+g;N(v,A)}var s={width:200,height:50,axis:"X",perspective:800,duration:200,delay:0,easing:"linear",direction:"positive",type:"real"},u=r.extend(s,e),v=this,f=u.width,x=u.height,c=u.even,l=u.perspective,p=u.duration,d=u.easing,B=u.delay,h=u.type,m=u.axis.toUpperCase(),F=u.direction,C=v.children().length;if(C>4)var C=4;if("Y"==m)var g=f;else var g=x;if(void 0==c)var c=g;if(g!==c){var y=!1;if("skip"==h)var h="real"}else var y=!0;if("repeat"!==h&&"skip"!==h)var h="real";if("negative"!==F)var F="positive";Y(),M(),E();var S=r(v).find(".turnBoxButtonFor-"+a(r(v).selector));o(v,S,p,B,h,C,y,F,!1)},r.fn.turnBoxLink=function(a){var n=r(a.box),t=this,i=e(n),s=a.events,u=a.dist;if(void 0==s)var s="click";if(void 0==u)var u="next";var v={events:s,dist:u};o(n,t,i.duration,i.delay,i.type,i.face_pcs,i.fixed,i.direction,v)},r.fn.turnBoxAnimate=function(a){var n={animation:!0,face:1},t=r(this);r.each(t,function(){var t=r(this),i=e(t),s=r.extend(n,a);if(s.face>i.face_pcs)var o=i.face_pcs;else var o=s.face;var v=Math.abs(o-i.current_num),f=s.animation;if("skip"!==i.type&&v>1)var f=!1;u(t,i.current_num,o,i.duration,i.delay,i.type,i.face_pcs,i.fixed,i.direction,f)})}}(jQuery);